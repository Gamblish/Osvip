{"ast":null,"code":"import { AuthResponse } from \"../models/response/AuthRespone\";\nimport AuthService from \"../services/AuthService\";\nimport { IUser } from \"../models/IUser\";\nexport default class Store {\n  constructor() {\n    this.user = {\n      id,\n      email\n    };\n    this.isAuth = false;\n  }\n\n  setAuth(bool) {\n    this.isAuth = bool;\n  }\n\n  setUser(user) {\n    this.user = user;\n  }\n\n  async login(email, password) {\n    try {\n      const response = await AuthService.login(email, password);\n      localStorage.setItem('token', response.data.accessToken);\n      this.setAuth(true);\n      this.setUser(response.data.user);\n    } catch (e) {\n      var _e$response, _e$response$data;\n\n      console.log((_e$response = e.response) === null || _e$response === void 0 ? void 0 : (_e$response$data = _e$response.data) === null || _e$response$data === void 0 ? void 0 : _e$response$data.message);\n    }\n  }\n\n  async registration(email, password) {\n    try {\n      const response = await AuthService.registration(email, password);\n      localStorage.setItem('token', response.data.accessToken);\n      this.setAuth(true);\n      this.setUser(response.data.user);\n    } catch (e) {\n      var _e$response2, _e$response2$data;\n\n      console.log((_e$response2 = e.response) === null || _e$response2 === void 0 ? void 0 : (_e$response2$data = _e$response2.data) === null || _e$response2$data === void 0 ? void 0 : _e$response2$data.message);\n    }\n  }\n\n  async logout() {\n    try {\n      const response = await AuthService.logout();\n      localStorage.removeItem('token');\n      this.setAuth(false);\n      this.setUser({});\n    } catch (e) {\n      var _e$response3, _e$response3$data;\n\n      console.log((_e$response3 = e.response) === null || _e$response3 === void 0 ? void 0 : (_e$response3$data = _e$response3.data) === null || _e$response3$data === void 0 ? void 0 : _e$response3$data.message);\n    }\n  }\n\n}","map":{"version":3,"sources":["/Applications/Osvip/osvip/src/store/Store.jsx"],"names":["AuthResponse","AuthService","IUser","Store","user","id","email","isAuth","setAuth","bool","setUser","login","password","response","localStorage","setItem","data","accessToken","e","console","log","message","registration","logout","removeItem"],"mappings":"AAAA,SAASA,YAAT,QAA6B,gCAA7B;AACA,OAAOC,WAAP,MAAwB,yBAAxB;AACA,SAASC,KAAT,QAAsB,iBAAtB;AAEA,eAAe,MAAMC,KAAN,CAAY;AAAA;AAAA,SAC1BC,IAD0B,GACnB;AAAEC,MAAAA,EAAF;AAAMC,MAAAA;AAAN,KADmB;AAAA,SAE1BC,MAF0B,GAEjB,KAFiB;AAAA;;AAK1BC,EAAAA,OAAO,CAACC,IAAD,EAAO;AACb,SAAKF,MAAL,GAAcE,IAAd;AACA;;AAEDC,EAAAA,OAAO,CAACN,IAAD,EAAO;AACb,SAAKA,IAAL,GAAYA,IAAZ;AAEA;;AAEU,QAALO,KAAK,CAACL,KAAD,EAAQM,QAAR,EAAkB;AAC5B,QAAI;AACH,YAAMC,QAAQ,GAAG,MAAMZ,WAAW,CAACU,KAAZ,CAAkBL,KAAlB,EAAyBM,QAAzB,CAAvB;AACAE,MAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BF,QAAQ,CAACG,IAAT,CAAcC,WAA5C;AACA,WAAKT,OAAL,CAAa,IAAb;AACA,WAAKE,OAAL,CAAaG,QAAQ,CAACG,IAAT,CAAcZ,IAA3B;AACA,KALD,CAKE,OAAOc,CAAP,EAAU;AAAA;;AACXC,MAAAA,OAAO,CAACC,GAAR,gBAAYF,CAAC,CAACL,QAAd,oEAAY,YAAYG,IAAxB,qDAAY,iBAAkBK,OAA9B;AACA;AACD;;AACiB,QAAZC,YAAY,CAAChB,KAAD,EAAQM,QAAR,EAAkB;AACnC,QAAI;AACH,YAAMC,QAAQ,GAAG,MAAMZ,WAAW,CAACqB,YAAZ,CAAyBhB,KAAzB,EAAgCM,QAAhC,CAAvB;AACAE,MAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BF,QAAQ,CAACG,IAAT,CAAcC,WAA5C;AACA,WAAKT,OAAL,CAAa,IAAb;AACA,WAAKE,OAAL,CAAaG,QAAQ,CAACG,IAAT,CAAcZ,IAA3B;AACA,KALD,CAKE,OAAOc,CAAP,EAAU;AAAA;;AACXC,MAAAA,OAAO,CAACC,GAAR,iBAAYF,CAAC,CAACL,QAAd,sEAAY,aAAYG,IAAxB,sDAAY,kBAAkBK,OAA9B;AACA;AAED;;AAGW,QAANE,MAAM,GAAG;AACd,QAAI;AACH,YAAMV,QAAQ,GAAG,MAAMZ,WAAW,CAACsB,MAAZ,EAAvB;AACAT,MAAAA,YAAY,CAACU,UAAb,CAAwB,OAAxB;AACA,WAAKhB,OAAL,CAAa,KAAb;AACA,WAAKE,OAAL,CAAa,EAAb;AACA,KALD,CAKE,OAAOQ,CAAP,EAAU;AAAA;;AACXC,MAAAA,OAAO,CAACC,GAAR,iBAAYF,CAAC,CAACL,QAAd,sEAAY,aAAYG,IAAxB,sDAAY,kBAAkBK,OAA9B;AACA;AACD;;AA9CyB","sourcesContent":["import { AuthResponse } from \"../models/response/AuthRespone\";\nimport AuthService from \"../services/AuthService\";\nimport { IUser } from \"../models/IUser\";\n\nexport default class Store {\n\tuser = { id, email }\n\tisAuth = false;\n\n\n\tsetAuth(bool) {\n\t\tthis.isAuth = bool\n\t}\n\n\tsetUser(user) {\n\t\tthis.user = user;\n\n\t}\n\n\tasync login(email, password) {\n\t\ttry {\n\t\t\tconst response = await AuthService.login(email, password);\n\t\t\tlocalStorage.setItem('token', response.data.accessToken);\n\t\t\tthis.setAuth(true)\n\t\t\tthis.setUser(response.data.user)\n\t\t} catch (e) {\n\t\t\tconsole.log(e.response?.data?.message)\n\t\t}\n\t}\n\tasync registration(email, password) {\n\t\ttry {\n\t\t\tconst response = await AuthService.registration(email, password);\n\t\t\tlocalStorage.setItem('token', response.data.accessToken);\n\t\t\tthis.setAuth(true)\n\t\t\tthis.setUser(response.data.user)\n\t\t} catch (e) {\n\t\t\tconsole.log(e.response?.data?.message)\n\t\t}\n\n\t}\n\n\n\tasync logout() {\n\t\ttry {\n\t\t\tconst response = await AuthService.logout();\n\t\t\tlocalStorage.removeItem('token',);\n\t\t\tthis.setAuth(false)\n\t\t\tthis.setUser({})\n\t\t} catch (e) {\n\t\t\tconsole.log(e.response?.data?.message)\n\t\t}\n\t}\n\n}"]},"metadata":{},"sourceType":"module"}
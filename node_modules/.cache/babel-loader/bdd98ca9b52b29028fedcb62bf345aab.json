{"ast":null,"code":"import { AuthResponse } from \"../models/response/AuthRespone\";\nimport AuthService from \"../services/AuthService\";\nimport { IUser } from \"../models/IUser\";\nimport { useContext } from \"react\";\nimport { Context } from \"../Context\";\nimport api from \"../http\";\nexport default class Store {\n  constructor() {\n    this.User = new IUser();\n    this.isAuth = false;\n  }\n\n  setAuth(bool) {\n    this.isAuth = bool;\n    console.log(this.isAuth);\n  }\n\n  setUser(user) {\n    this.user = user;\n  }\n\n  async login(email, password, clear, setAuth) {\n    try {\n      const response = await AuthService.login(email, password);\n      console.log(response);\n      localStorage.setItem('access_token', response.data['access_token']);\n      clear();\n      setAuth(true);\n    } catch (e) {\n      var _e$response, _e$response$data;\n\n      console.log((_e$response = e.response) === null || _e$response === void 0 ? void 0 : (_e$response$data = _e$response.data) === null || _e$response$data === void 0 ? void 0 : _e$response$data.message);\n    }\n  }\n\n  async registration(email, password, clear, setAuth, fcs) {\n    try {\n      const response = await AuthService.registration(email, password, fcs);\n      console.log(response);\n      localStorage.setItem('access_token', response.data['access_token']);\n      setAuth(true);\n      IUser.email = email;\n      IUser.fcs = fcs;\n      console.log(user);\n      clear();\n    } catch (e) {\n      var _e$response2, _e$response2$data;\n\n      console.log((_e$response2 = e.response) === null || _e$response2 === void 0 ? void 0 : (_e$response2$data = _e$response2.data) === null || _e$response2$data === void 0 ? void 0 : _e$response2$data.message);\n    }\n  }\n\n  async logout(setAuth) {\n    try {\n      //const response = await AuthService.logout();\n      localStorage.removeItem('access_token');\n      setAuth(false);\n      this.setUser({});\n    } catch (e) {\n      var _e$response3, _e$response3$data;\n\n      console.log((_e$response3 = e.response) === null || _e$response3 === void 0 ? void 0 : (_e$response3$data = _e$response3.data) === null || _e$response3$data === void 0 ? void 0 : _e$response3$data.message);\n    }\n  }\n\n}","map":{"version":3,"sources":["/Applications/Osvip/osvip/src/store/Store.jsx"],"names":["AuthResponse","AuthService","IUser","useContext","Context","api","Store","User","isAuth","setAuth","bool","console","log","setUser","user","login","email","password","clear","response","localStorage","setItem","data","e","message","registration","fcs","logout","removeItem"],"mappings":"AAAA,SAASA,YAAT,QAA6B,gCAA7B;AACA,OAAOC,WAAP,MAAwB,yBAAxB;AACA,SAASC,KAAT,QAAsB,iBAAtB;AACA,SAASC,UAAT,QAA2B,OAA3B;AACA,SAASC,OAAT,QAAwB,YAAxB;AACA,OAAOC,GAAP,MAAgB,SAAhB;AAEA,eAAe,MAAMC,KAAN,CAAY;AAAA;AAAA,SAC1BC,IAD0B,GACnB,IAAIL,KAAJ,EADmB;AAAA,SAE1BM,MAF0B,GAEjB,KAFiB;AAAA;;AAO1BC,EAAAA,OAAO,CAACC,IAAD,EAAO;AACb,SAAKF,MAAL,GAAcE,IAAd;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAKJ,MAAjB;AACA;;AAEDK,EAAAA,OAAO,CAACC,IAAD,EAAO;AACb,SAAKA,IAAL,GAAYA,IAAZ;AAEA;;AAEU,QAALC,KAAK,CAACC,KAAD,EAAQC,QAAR,EAAkBC,KAAlB,EAAyBT,OAAzB,EAAkC;AAC5C,QAAI;AACH,YAAMU,QAAQ,GAAG,MAAMlB,WAAW,CAACc,KAAZ,CAAkBC,KAAlB,EAAyBC,QAAzB,CAAvB;AACAN,MAAAA,OAAO,CAACC,GAAR,CAAYO,QAAZ;AACAC,MAAAA,YAAY,CAACC,OAAb,CAAqB,cAArB,EAAqCF,QAAQ,CAACG,IAAT,CAAc,cAAd,CAArC;AAGAJ,MAAAA,KAAK;AACLT,MAAAA,OAAO,CAAC,IAAD,CAAP;AACA,KARD,CAQE,OAAOc,CAAP,EAAU;AAAA;;AACXZ,MAAAA,OAAO,CAACC,GAAR,gBAAYW,CAAC,CAACJ,QAAd,oEAAY,YAAYG,IAAxB,qDAAY,iBAAkBE,OAA9B;AACA;AACD;;AACiB,QAAZC,YAAY,CAACT,KAAD,EAAQC,QAAR,EAAkBC,KAAlB,EAAyBT,OAAzB,EAAkCiB,GAAlC,EAAuC;AACxD,QAAI;AACH,YAAMP,QAAQ,GAAG,MAAMlB,WAAW,CAACwB,YAAZ,CAAyBT,KAAzB,EAAgCC,QAAhC,EAA0CS,GAA1C,CAAvB;AACAf,MAAAA,OAAO,CAACC,GAAR,CAAYO,QAAZ;AACAC,MAAAA,YAAY,CAACC,OAAb,CAAqB,cAArB,EAAqCF,QAAQ,CAACG,IAAT,CAAc,cAAd,CAArC;AACAb,MAAAA,OAAO,CAAC,IAAD,CAAP;AACAP,MAAAA,KAAK,CAACc,KAAN,GAAeA,KAAf;AACAd,MAAAA,KAAK,CAACwB,GAAN,GAAaA,GAAb;AACAf,MAAAA,OAAO,CAACC,GAAR,CAAYE,IAAZ;AACAI,MAAAA,KAAK;AACL,KATD,CASE,OAAOK,CAAP,EAAU;AAAA;;AACXZ,MAAAA,OAAO,CAACC,GAAR,iBAAYW,CAAC,CAACJ,QAAd,sEAAY,aAAYG,IAAxB,sDAAY,kBAAkBE,OAA9B;AACA;AAED;;AAGW,QAANG,MAAM,CAAClB,OAAD,EAAU;AACrB,QAAI;AACH;AACAW,MAAAA,YAAY,CAACQ,UAAb,CAAwB,cAAxB;AACAnB,MAAAA,OAAO,CAAC,KAAD,CAAP;AACA,WAAKI,OAAL,CAAa,EAAb;AACA,KALD,CAKE,OAAOU,CAAP,EAAU;AAAA;;AACXZ,MAAAA,OAAO,CAACC,GAAR,iBAAYW,CAAC,CAACJ,QAAd,sEAAY,aAAYG,IAAxB,sDAAY,kBAAkBE,OAA9B;AACA;AACD;;AAxDyB","sourcesContent":["import { AuthResponse } from \"../models/response/AuthRespone\";\nimport AuthService from \"../services/AuthService\";\nimport { IUser } from \"../models/IUser\";\nimport { useContext } from \"react\";\nimport { Context } from \"../Context\";\nimport api from \"../http\";\n\nexport default class Store {\n\tUser = new IUser();\n\tisAuth = false;\n\n\n\n\n\tsetAuth(bool) {\n\t\tthis.isAuth = bool\n\t\tconsole.log(this.isAuth)\n\t}\n\n\tsetUser(user) {\n\t\tthis.user = user;\n\n\t}\n\n\tasync login(email, password, clear, setAuth) {\n\t\ttry {\n\t\t\tconst response = await AuthService.login(email, password);\n\t\t\tconsole.log(response)\n\t\t\tlocalStorage.setItem('access_token', response.data['access_token']);\n\n\n\t\t\tclear()\n\t\t\tsetAuth(true)\n\t\t} catch (e) {\n\t\t\tconsole.log(e.response?.data?.message)\n\t\t}\n\t}\n\tasync registration(email, password, clear, setAuth, fcs) {\n\t\ttry {\n\t\t\tconst response = await AuthService.registration(email, password, fcs);\n\t\t\tconsole.log(response)\n\t\t\tlocalStorage.setItem('access_token', response.data['access_token']);\n\t\t\tsetAuth(true)\n\t\t\tIUser.email = (email)\n\t\t\tIUser.fcs = (fcs)\n\t\t\tconsole.log(user)\n\t\t\tclear()\n\t\t} catch (e) {\n\t\t\tconsole.log(e.response?.data?.message)\n\t\t}\n\n\t}\n\n\n\tasync logout(setAuth) {\n\t\ttry {\n\t\t\t//const response = await AuthService.logout();\n\t\t\tlocalStorage.removeItem('access_token',);\n\t\t\tsetAuth(false)\n\t\t\tthis.setUser({})\n\t\t} catch (e) {\n\t\t\tconsole.log(e.response?.data?.message)\n\t\t}\n\t}\n\n}"]},"metadata":{},"sourceType":"module"}